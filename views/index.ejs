<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Star Wars Quote App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="icon" href="/assets/images/favicon.ico">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Aboreto&family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/assets/styles.css">
  </head>
  <body>
    <h1>May Node and Express be with you</h1>

    <form class="quotes-form" action="/quotes" method="POST">
      <label>
        Name:
        <input type="text" placeholder="name" name="name" data-test="new-name"/>
      </label>
      <label>
        Quote:
        <input type="text" placeholder="quote" name="quote" data-test="new-quote"/>
      </label>
      <button data-test="add-quote" type="submit">
        Submit
      </button>
    </form>

    <div class="quotes-list">
      <h2>Quotes</h2>
      <ul class="quotes">
        <% for(var i = 0; i < quotes.length; i++) { %>
          <li class="quote">
            <quote-model data-id="<%= quotes[i]._id %>">
              <div class="quote">
<!--                TODO: fix functionality-->
                <button data-test="update-button" onclick="showUpdateForm(this)">
                  <img src="/assets/images/edit.png" alt="Edit quote" width="30px">
                </button>
                <span><%= quotes[i].name %>: <%= quotes[i].quote %></span>
                <button data-test="delete-button">
                  <img src="/assets/images/delete.png" alt="Delete quote" width="30px">
                </button>
              </div>
              <div class="update-form" style="display: none">
                <label>
                  Name:
                  <input type="text" placeholder="name" name="name" value="<%= quotes[i].name %>" />
                </label>
                <label>
                  Quote:
                  <input data-test="update-quote" type="text" placeholder="quote" name="quote" value="<%= quotes[i].quote %>" />
                </label>
                <button data-test="save-update" onclick="updateQuote(this, '<%= quotes[i]._id %>')">Save</button>
              </div>
            </quote-model>
          </li>
        <% } %>
      </ul>
    </div>

    <script src="/main.js"></script>
  </body>
</html>